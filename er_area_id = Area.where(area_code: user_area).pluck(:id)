
[1mFrom:[0m /home/kalp/work/rail_data/app/controllers/admin/rake_loads_controller.rb @ line 30 Admin::RakeLoadsController#new:

    [1;34m27[0m: [32mdef[0m [1;34mnew[0m
    [1;34m28[0m:   user_area = current_user.area
    [1;34m29[0m:   [32mif[0m user_area.present? [32mand[0m current_user != [31m[1;31m"[0m[31mGIMB[1;31m"[0m[31m[0m
 => [1;34m30[0m:     binding.pry
    [1;34m31[0m:     user_area_id = [1;34;4mArea[0m.where([35marea_code[0m: user_area).pluck([33m:id[0m)
    [1;34m32[0m:   [32mend[0m
    [1;34m33[0m: 
    [1;34m34[0m:   data = params[[33m:data[0m].to_date [32mif[0m params[[33m:data[0m].present?
    [1;34m35[0m:   data = [1;34;4mDate[0m.today [32mif[0m data.blank?
    [1;34m36[0m:   [1;34m# data = data.strftime("%Y-%m-%d")[0m
    [1;34m37[0m:   [1;34m# @rake_loads = RakeLoad.where(release_date: data,rakeform_otherform: "R")[0m
    [1;34m38[0m:   [1;34m# @rake_loads += RakeLoad.where(release_date: nil,rakeform_otherform: "R")[0m
    [1;34m39[0m:   [1;34m# @rake_loads += RakeLoad.where(release_date: "",rakeform_otherform: "R")[0m
    [1;34m40[0m:   [1;34m# => (lessthan-lt, greater-gt equal-eq)[0m
    [1;34m41[0m:   @rake_loads = [1;34;4mRakeLoad[0m.where([1;34;4mRakeLoad[0m.arel_table[[33m:arrival_date[0m].lteq(data).and([1;34;4mRakeLoad[0m.arel_table[[33m:release_date[0m].eq(data).and([1;34;4mRakeLoad[0m.arel_table[[33m:rakeform_otherform[0m].eq([31m[1;31m"[0m[31mR[1;31m"[0m[31m[0m))))
    [1;34m42[0m:   @rake_loads += [1;34;4mRakeLoad[0m.where([1;34;4mRakeLoad[0m.arel_table[[33m:arrival_date[0m].lteq(data).and([1;34;4mRakeLoad[0m.arel_table[[33m:release_date[0m].eq([1;36mnil[0m).and([1;34;4mRakeLoad[0m.arel_table[[33m:rakeform_otherform[0m].eq([31m[1;31m"[0m[31mR[1;31m"[0m[31m[0m))))
    [1;34m43[0m:   @rake_loads += [1;34;4mRakeLoad[0m.where([1;34;4mRakeLoad[0m.arel_table[[33m:arrival_date[0m].lteq(data).and([1;34;4mRakeLoad[0m.arel_table[[33m:release_date[0m].eq([31m[1;31m"[0m[31m[1;31m"[0m[31m[0m).and([1;34;4mRakeLoad[0m.arel_table[[33m:rakeform_otherform[0m].eq([31m[1;31m"[0m[31mR[1;31m"[0m[31m[0m))))
    [1;34m44[0m:   @rake_loads += [1;34;4mRakeLoad[0m.where([1;34;4mRakeLoad[0m.arel_table[[33m:arrival_date[0m].eq([1;36mnil[0m).and([1;34;4mRakeLoad[0m.arel_table[[33m:rakeform_otherform[0m].eq([31m[1;31m"[0m[31mR[1;31m"[0m[31m[0m)))
    [1;34m45[0m:   @rake_loads += [1;34;4mRakeLoad[0m.where([1;34;4mRakeLoad[0m.arel_table[[33m:arrival_date[0m].eq([31m[1;31m"[0m[31m[1;31m"[0m[31m[0m).and([1;34;4mRakeLoad[0m.arel_table[[33m:rakeform_otherform[0m].eq([31m[1;31m"[0m[31mR[1;31m"[0m[31m[0m)))
    [1;34m46[0m:   @total_rake_loads = ([1;34;4mRakeLoad[0m.where([35mrelease_date[0m: data,[35mrakeform_otherform[0m: [31m[1;31m"[0m[31mR[1;31m"[0m[31m[0m).pluck([33m:loaded_unit[0m)).sum
    [1;34m47[0m:   @total_other_loads = ([1;34;4mRakeLoad[0m.where([35mrelease_date[0m: data,[35mrakeform_otherform[0m: [31m[1;31m"[0m[31mO[1;31m"[0m[31m[0m).pluck([33m:loaded_unit[0m)).sum
    [1;34m48[0m: 
    [1;34m49[0m:   get_data_for_form
    [1;34m50[0m: [32mend[0m

